###  如何理解 HTML 语义化？

- 让人更容易读懂（增加代码可读性）。
- 让搜索引擎更容易读懂，有助于爬虫抓取更多的有效信息，爬虫依赖于标签来确定上下文和各个关键字的权重（SEO）。
- 在没有 CSS 样式下，页面也能呈现出很好地内容结构、代码结构。

### script 标签中 defer 和 async 的区别？

- `script` ：会阻碍 HTML 解析，只有下载好并执行完脚本才会继续解析 HTML。
- `async script` ：解析 HTML 过程中进行脚本的异步下载，下载成功立马执行，有可能会阻断 HTML 的解析。
- `defer script`：完全不会阻碍 HTML 的解析，解析完成之后再按照顺序执行脚本。
-![[Pasted image 20241022143359.png]]


### 从浏览器地址栏输入 url 到请求返回发生了什么

1. 输入url，解析协议、主机、端口、路径，构造一个请求（大概率是http的）
2. dns域名解析
3. 进行tcp连接（三次握手，为了确保双方的接收和发送能力，第一次确认发送方的发送能力，第二次确认接收方的接受能力和发送能力，第三次确认发送方的接收能力）
4. 然后到了http请求
5. 服务器处理请求然后组装http报文进行返回
6. 浏览器渲染页面
![[Pasted image 20241022145449.png]]
7. 断开tcp连接，TCP 四次挥手

### 紧接上文，计算机网络知识，网络模型

- 物理层：关注的是比特流的物理传输
- 数据链路层：处理物理地址（如MAC地址），并提供介质访问控制(MAC)功能
- 网络层：处理逻辑地址（如IP地址），并决定数据如何从源到目的地的路径
- 传输层：提供端到端的数据传输服务，TCP
- 应用层：包括所有高层协议，如HTTP、FTP、SMTP等

### 紧接上文，浏览器渲染页面

- HTML文档解析：解析过程遇到html标签，会生成dom树，生成cssom树。
	- css不会阻塞html解析，**下载和解析 CSS 的工作是在预解析线程中进行的**
	- js会阻塞html解析，**JS 代码的执行过程可能会修改当前的 DOM 树，所以 DOM 树的生成必须暂停**
	- 参考上面对于script、defer、async的处理方式
- 样式计算：上面的attachment，生成一个带有样式的dom树
- 布局：会过滤比如display：none的节点，会生成layout树，**根据视口具体的宽高转为像素值**
- 分层：堆叠上下文bfc，滚动条，transform
- 绘制：painting
- 分块+光栅化：`GPU` 进程会开启多个线程来完成光栅化，并且优先处理靠近视口区域的块。
- 画：draw

### 重流 reflow 和重绘 repaint


- **重流**：浏览器重新计算元素的几何属性，比如位置大小什么的，重新布局页面的元素。reflow的本质上其实是重新计算layout树，在样式计算或者dom树上修改，修改完之后，重新生成layout树。

- **重绘**：实质元素的样式发生变化，但是不影响布局，只是浏览器需要重新绘制这个元素而已。


通过构造渲染树和回流阶段，我们知道了哪些节点是可见的，以及可见节点的样式和具体的几何信息(位置、大小)，那么我们就可以将渲染树的每个节点都转换为屏幕上的实际像素，这个阶段就叫做重绘节点。

什么操作会产生重流：
- 增删可见的dom
- 元素位置改变
- 元素尺寸改变
- 内容改变，比如文本，图片
- 第一次渲染
- 窗口改变（回流根据视口计算元素的位置和大小）
重绘，上面的一定会发生重绘。
只发生重绘的情况：比如就改个background-color

措施：
- 样式集中改变，比如加个.active
- 批量操作dom，
- 使用absolute或者fixed脱离文档流
- gpu加速，比如translate会比absolute改变left高效
- 其实浏览器自己会攒到一定数量之后执行一批操作
- 读写分离，有时候批量写入是可以攒一起的，但是你这时候console一下要读取数据，那么就会执行一次reflow


### 事件捕获和事件冒泡

捕获是从 root 到具体触发的位置，理解为 click 事件是从最顶层按压下去穿透到被点击的dom，所以捕获可以从中间任何一个节点捕获让他从这里就打止了，下面的dom就不会有click触发。

冒泡是一个事件从被触发的最底层元素开始往上冒泡 onclick，一层一层往上触发 onclick事件，同理，你可以在中间任何一层阻止冒泡，然后这个onclick 就不会再往上冒，触发上面的click事件了。